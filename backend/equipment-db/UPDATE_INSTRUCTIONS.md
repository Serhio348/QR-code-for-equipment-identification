# Инструкция по обновлению базы данных для нового типа оборудования

## Проблема
При создании оборудования типа "Прочее промышленное оборудование" (`industrial`) возникает ошибка.

## Решение

### Шаг 1: Обновите код в Google Apps Script

1. Откройте вашу Google Sheets таблицу **"База данных оборудования"**
2. В меню выберите: **Расширения → Apps Script**
3. Откройте файл `Code.gs` из папки `backend/equipment-db/` в этом проекте
4. Скопируйте весь обновленный код
5. Вставьте в редактор Google Apps Script (замените весь старый код)
6. Сохраните: **Ctrl+S**

### Шаг 2: Обновите развертывание веб-приложения

1. В Google Apps Script нажмите **Развернуть → Управление развертываниями**
2. Нажмите на карандаш ✏️ рядом с существующим развертыванием
3. **ВАЖНО:** Проверьте, что "У кого есть доступ" установлено в **"Все"**
4. Нажмите **Развернуть** (версия обновится автоматически)
5. URL веб-приложения останется прежним, обновлять его в `src/config/api.ts` не нужно

### Шаг 3: Валидация данных в Google Sheets (НЕ ОБЯЗАТЕЛЬНО)

**Важно:** Валидация данных в Google Sheets НЕ влияет на работу API. Код Google Apps Script сохраняет тип оборудования как строку, независимо от валидации в таблице.

**Если валидации нет** (что вы и видите - только "фильтр" и "другое" или вообще ничего):
- ✅ Это нормально, ничего делать не нужно
- Код будет работать корректно со всеми типами, включая новый `industrial`

**Если валидация есть** (выпадающий список в колонке C):
- Можно обновить список, добавив новые типы
- Или удалить валидацию: **Данные → Валидация данных → Удалить проверку**
- Это не обязательно, но может быть удобно для ручного ввода данных в таблице

### Шаг 4: Проверьте работу

1. Откройте приложение в браузере
2. Попробуйте создать новое оборудование типа "Прочее промышленное оборудование"
3. Если ошибка сохраняется, проверьте логи в Google Apps Script:
   - **Вид → Логи**
   - Создайте оборудование через приложение
   - Проверьте логи на наличие ошибок

## Поддерживаемые типы оборудования

После обновления поддерживаются следующие типы:

- `filter` - Фильтр
- `pump` - Насос
- `tank` - Резервуар
- `valve` - Клапан
- `electrical` - Электрооборудование
- `ventilation` - Вентиляционное оборудование
- `plumbing` - Сантехническое оборудование
- `industrial` - Прочее промышленное оборудование ⭐ **НОВЫЙ**
- `other` - Другое

## Если проблема сохраняется

1. **Проверьте логи Google Apps Script:**
   - Откройте **Вид → Логи**
   - Создайте оборудование через приложение
   - Скопируйте текст ошибки из логов

2. **Проверьте консоль браузера:**
   - Откройте консоль (F12)
   - Создайте оборудование
   - Проверьте ошибки в консоли

3. **Проверьте URL API:**
   - Убедитесь, что URL в `src/config/api.ts` правильный
   - Проверьте, что развертывание обновлено

4. **Пересоздайте развертывание:**
   - Удалите старое развертывание
   - Создайте новое с настройками:
     - **Выполнять от имени:** Меня
     - **У кого есть доступ:** **Все** (обязательно!)
   - Скопируйте новый URL и обновите его в `src/config/api.ts`

