# –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Supabase –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏](#–æ–±–∑–æ—Ä-–º–∏–≥—Ä–∞—Ü–∏–∏)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ-—Å–µ—Ä–≤–µ—Ä–∞)
3. [–ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL](#–º–∏–≥—Ä–∞—Ü–∏—è-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö-postgresql)
4. [–ú–∏–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](#–º–∏–≥—Ä–∞—Ü–∏—è-—Å–∏—Å—Ç–µ–º—ã-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
5. [–ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞](#–º–∏–≥—Ä–∞—Ü–∏—è-—Ñ–∞–π–ª–æ–≤–æ–≥–æ-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞)
6. [–ú–∏–≥—Ä–∞—Ü–∏—è API –∫–ª–∏–µ–Ω—Ç–æ–≤](#–º–∏–≥—Ä–∞—Ü–∏—è-api-–∫–ª–∏–µ–Ω—Ç–æ–≤)
7. [–ú–∏–≥—Ä–∞—Ü–∏—è cron jobs](#–º–∏–≥—Ä–∞—Ü–∏—è-cron-jobs)
8. [–ü–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#–ø–ª–∞–Ω-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
9. [–ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏](#—á–µ–∫–ª–∏—Å—Ç-–º–∏–≥—Ä–∞—Ü–∏–∏)

---

## üéØ –û–±–∑–æ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Supabase)

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (Supabase)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** Supabase Auth (JWT —Ç–æ–∫–µ–Ω—ã)
- **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:** Supabase Storage (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ)
- **API:** –ü—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π SDK
- **Cron jobs:** Railway cron jobs —Å Service Role key

### –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (JWT —Ç–æ–∫–µ–Ω—ã, bcrypt)
- **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:** –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–ª–∏ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ (MinIO)
- **API:** REST API –Ω–∞ Node.js/Express –∏–ª–∏ Fastify
- **Cron jobs:** –°–∏—Å—Ç–µ–º–Ω—ã–π cron –∏–ª–∏ node-cron

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

1. ‚úÖ **PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã, —Ñ—É–Ω–∫—Ü–∏–∏, —Ç—Ä–∏–≥–≥–µ—Ä—ã, RLS –ø–æ–ª–∏—Ç–∏–∫–∏
2. ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è, —Å–µ—Å—Å–∏–∏
3. ‚úÖ **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** - PDF —Ñ–∞–π–ª—ã –∞–Ω–∞–ª–∏–∑–æ–≤ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–¥—ã
4. ‚úÖ **API –∫–ª–∏–µ–Ω—Ç—ã** - –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π backend API
5. ‚úÖ **Cron jobs** - —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö Beliot

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—Ç–µ–∫

**Backend:**
- **Node.js 20+** - runtime
- **Express.js** –∏–ª–∏ **Fastify** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **pg** (node-postgres) - –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- **jsonwebtoken** - JWT —Ç–æ–∫–µ–Ω—ã
- **bcrypt** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **nodemailer** - –æ—Ç–ø—Ä–∞–≤–∫–∞ email (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è)
- **multer** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **node-cron** - cron jobs

**Frontend:**
- **React 18** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **Axios** –∏–ª–∏ **fetch** - HTTP –∫–ª–∏–µ–Ω—Ç (–≤–º–µ—Å—Ç–æ Supabase SDK)
- **react-router-dom** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.ts          # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.ts               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ JWT
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.ts           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ   ‚îú‚îÄ‚îÄ models/                  # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å raw SQL)
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts              # –ú–∞—Ä—à—Ä—É—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ water-quality.ts     # –ú–∞—Ä—à—Ä—É—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ beliot.ts            # –ú–∞—Ä—à—Ä—É—Ç—ã Beliot
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ equipment.ts         # –ú–∞—Ä—à—Ä—É—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts              # Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rls.ts               # –≠–º—É–ª—è—Ü–∏—è RLS –ø–æ–ª–∏—Ç–∏–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ error-handler.ts     # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts      # –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.service.ts      # –°–µ—Ä–≤–∏—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ water-quality.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.service.ts   # –°–µ—Ä–≤–∏—Å —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.ts                # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.ts        # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ cron/
‚îÇ       ‚îî‚îÄ‚îÄ collect-beliot-readings.ts
‚îú‚îÄ‚îÄ storage/                     # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ water-quality-analysis/
‚îî‚îÄ‚îÄ package.json
```

---

## üóÑÔ∏è –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

### –®–∞–≥ 1: –≠–∫—Å–ø–æ—Ä—Ç —Å—Ö–µ–º—ã –∏–∑ Supabase

1. **–≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î:**
   ```bash
   # –ò—Å–ø–æ–ª—å–∑—É—è pg_dump –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   pg_dump -h <supabase-host> -U postgres -d postgres \
     --schema-only --no-owner --no-privileges \
     -f supabase-schema-export.sql
   ```

2. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   # –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
   pg_dump -h <supabase-host> -U postgres -d postgres \
     --data-only --no-owner --no-privileges \
     -f supabase-data-export.sql
   ```

3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ SQL —Ñ–∞–π–ª—ã:**
   - `docs/supabase-schema.sql` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞
   - `docs/migrations/*.sql` - –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 2: –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ö–µ–º—ã –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –≤–Ω–µ—Å—Ç–∏:**

1. **–£–¥–∞–ª–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `auth.users`:**
   ```sql
   -- –ë–´–õ–û (Supabase):
   id UUID REFERENCES auth.users(id) ON DELETE CASCADE
   
   -- –°–¢–ê–ù–ï–¢ (–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä):
   id UUID PRIMARY KEY DEFAULT gen_random_uuid()
   -- –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É users
   ```

2. **–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `users` –≤–º–µ—Å—Ç–æ `auth.users`:**
   ```sql
   CREATE TABLE public.users (
     id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
     email TEXT UNIQUE NOT NULL,
     password_hash TEXT NOT NULL,
     email_verified BOOLEAN DEFAULT false,
     email_verification_token TEXT,
     password_reset_token TEXT,
     password_reset_expires TIMESTAMPTZ,
     created_at TIMESTAMPTZ DEFAULT NOW(),
     updated_at TIMESTAMPTZ DEFAULT NOW()
   );
   ```

3. **–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏:**
   ```sql
   -- –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ REFERENCES auth.users(id) –Ω–∞ REFERENCES public.users(id)
   ```

4. **–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Å `auth.uid()`:**
   ```sql
   -- –ë–´–õ–û (Supabase):
   WHERE id = auth.uid()
   
   -- –°–¢–ê–ù–ï–¢ (–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä):
   -- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å user_id –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏
   WHERE id = p_user_id
   ```

5. **–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
   - RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤ middleware –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å RLS –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ middleware

### –®–∞–≥ 3: –ò–º–ø–æ—Ä—Ç –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ë–î

1. **–°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```sql
   CREATE DATABASE equipment_management;
   ```

2. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É:**
   ```bash
   psql -U postgres -d equipment_management -f supabase-schema-adapted.sql
   ```

3. **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ:**
   ```bash
   psql -U postgres -d equipment_management -f supabase-data-export.sql
   ```

### –®–∞–≥ 4: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–í–ê–ñ–ù–û:** –ü–∞—Ä–æ–ª–∏ –≤ Supabase —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã.

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**

1. **–ü–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª–∏:**
   - –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è"
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å email –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

2. **–í—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å:**
   - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –ø–æ email

3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:**
   - –û—Å—Ç–∞–≤–∏—Ç—å Supabase –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏
   - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üîê –ú–∏–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–§–∞–π–ª: `backend/src/routes/auth.ts`**

```typescript
import express from 'express';
import { register, login, logout, resetPassword, verifyEmail } from '../services/auth.service';
import { authenticateToken } from '../middleware/auth';

const router = express.Router();

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
router.post('/register', async (req, res) => {
  try {
    const { email, password, name } = req.body;
    const result = await register({ email, password, name });
    res.json(result);
  } catch (error: any) {
    res.status(400).json({ error: error.message });
  }
});

// –í—Ö–æ–¥
router.post('/login', async (req, res) => {
  try {
    const { email, password } = req.body;
    const result = await login({ email, password });
    res.json(result);
  } catch (error: any) {
    res.status(401).json({ error: error.message });
  }
});

// –í—ã—Ö–æ–¥
router.post('/logout', authenticateToken, async (req, res) => {
  try {
    await logout(req.user!.id);
    res.json({ success: true });
  } catch (error: any) {
    res.status(500).json({ error: error.message });
  }
});

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (–∑–∞–ø—Ä–æ—Å)
router.post('/reset-password', async (req, res) => {
  try {
    const { email } = req.body;
    await resetPassword(email);
    res.json({ success: true });
  } catch (error: any) {
    res.status(400).json({ error: error.message });
  }
});

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
router.post('/reset-password/confirm', async (req, res) => {
  try {
    const { token, password } = req.body;
    await confirmPasswordReset(token, password);
    res.json({ success: true });
  } catch (error: any) {
    res.status(400).json({ error: error.message });
  }
});

export default router;
```

### –®–∞–≥ 2: –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–§–∞–π–ª: `backend/src/services/auth.service.ts`**

```typescript
import bcrypt from 'bcrypt';
import jwt from 'jsonwebtoken';
import { db } from '../config/database';
import { sendEmail } from '../utils/email';

const JWT_SECRET = process.env.JWT_SECRET!;
const JWT_EXPIRES_IN = '8h';

export async function register(data: { email: string; password: string; name?: string }) {
  // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const existingUser = await db.query('SELECT id FROM users WHERE email = $1', [data.email]);
  if (existingUser.rows.length > 0) {
    throw new Error('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
  }

  // 2. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è
  const passwordHash = await bcrypt.hash(data.password, 10);

  // 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const result = await db.query(
    `INSERT INTO users (email, password_hash, email_verified)
     VALUES ($1, $2, false)
     RETURNING id, email, created_at`,
    [data.email, passwordHash]
  );

  const user = result.rows[0];

  // 4. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (—á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)
  await db.query(
    `INSERT INTO profiles (id, email, name, role)
     VALUES ($1, $2, $3, 'user')
     ON CONFLICT (id) DO NOTHING`,
    [user.id, data.email, data.name || '']
  );

  // 5. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –¥–æ—Å—Ç—É–ø–∞
  await db.query(
    `INSERT INTO user_app_access (user_id, equipment, water)
     VALUES ($1, false, false)
     ON CONFLICT (user_id) DO NOTHING`,
    [user.id]
  );

  // 6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞
  const token = jwt.sign({ userId: user.id, email: user.email }, JWT_SECRET, {
    expiresIn: JWT_EXPIRES_IN,
  });

  // 7. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞
  await db.query(
    `INSERT INTO login_history (user_id, success, login_at)
     VALUES ($1, true, NOW())`,
    [user.id]
  );

  return {
    user: {
      id: user.id,
      email: user.email,
      name: data.name,
      role: 'user',
    },
    token,
  };
}

export async function login(data: { email: string; password: string }) {
  // 1. –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const userResult = await db.query(
    `SELECT u.id, u.email, u.password_hash, p.name, p.role
     FROM users u
     LEFT JOIN profiles p ON p.id = u.id
     WHERE u.email = $1`,
    [data.email]
  );

  if (userResult.rows.length === 0) {
    await db.query(
      `INSERT INTO login_history (user_id, success, failure_reason, login_at)
       VALUES (NULL, false, 'User not found', NOW())`
    );
    throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
  }

  const user = userResult.rows[0];

  // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
  const passwordMatch = await bcrypt.compare(data.password, user.password_hash);
  if (!passwordMatch) {
    await db.query(
      `INSERT INTO login_history (user_id, success, failure_reason, login_at)
       VALUES ($1, false, 'Invalid password', NOW())`,
      [user.id]
    );
    throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
  }

  // 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ last_login_at
  await db.query(
    `UPDATE profiles SET last_login_at = NOW() WHERE id = $1`,
    [user.id]
  );

  // 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞
  const token = jwt.sign({ userId: user.id, email: user.email }, JWT_SECRET, {
    expiresIn: JWT_EXPIRES_IN,
  });

  // 5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
  await db.query(
    `INSERT INTO login_history (user_id, success, login_at)
     VALUES ($1, true, NOW())`,
    [user.id]
  );

  return {
    user: {
      id: user.id,
      email: user.email,
      name: user.name,
      role: user.role || 'user',
    },
    token,
  };
}

export async function logout(userId: string) {
  // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å blacklist —Ç–æ–∫–µ–Ω–æ–≤ –≤ Redis –∏–ª–∏ –ë–î
  // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º success
  return { success: true };
}
```

### –®–∞–≥ 3: Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–§–∞–π–ª: `backend/src/middleware/auth.ts`**

```typescript
import { Request, Response, NextFunction } from 'express';
import jwt from 'jsonwebtoken';
import { db } from '../config/database';

const JWT_SECRET = process.env.JWT_SECRET!;

export interface AuthRequest extends Request {
  user?: {
    id: string;
    email: string;
    role: string;
  };
}

export async function authenticateToken(
  req: AuthRequest,
  res: Response,
  next: NextFunction
) {
  const authHeader = req.headers['authorization'];
  const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN

  if (!token) {
    return res.status(401).json({ error: '–¢–æ–∫–µ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω' });
  }

  try {
    const decoded = jwt.verify(token, JWT_SECRET) as { userId: string; email: string };

    // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const result = await db.query(
      `SELECT u.id, u.email, p.role, p.name
       FROM users u
       LEFT JOIN profiles p ON p.id = u.id
       WHERE u.id = $1`,
      [decoded.userId]
    );

    if (result.rows.length === 0) {
      return res.status(401).json({ error: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω' });
    }

    req.user = {
      id: result.rows[0].id,
      email: result.rows[0].email,
      role: result.rows[0].role || 'user',
    };

    next();
  } catch (error) {
    return res.status(403).json({ error: '–ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω' });
  }
}

export async function requireAdmin(
  req: AuthRequest,
  res: Response,
  next: NextFunction
) {
  if (!req.user) {
    return res.status(401).json({ error: '–¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è' });
  }

  if (req.user.role !== 'admin') {
    return res.status(403).json({ error: '–¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞' });
  }

  next();
}
```

### –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**–§–∞–π–ª: `src/config/api.ts` (–Ω–æ–≤—ã–π)**

```typescript
const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000';

export async function apiRequest(
  endpoint: string,
  options: RequestInit = {}
): Promise<Response> {
  const token = localStorage.getItem('auth_token');

  const headers: HeadersInit = {
    'Content-Type': 'application/json',
    ...options.headers,
  };

  if (token) {
    headers['Authorization'] = `Bearer ${token}`;
  }

  const response = await fetch(`${API_URL}${endpoint}`, {
    ...options,
    headers,
  });

  if (!response.ok) {
    const error = await response.json().catch(() => ({ error: 'Unknown error' }));
    throw new Error(error.error || 'Request failed');
  }

  return response;
}
```

**–§–∞–π–ª: `src/services/api/authApi.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)**

```typescript
import { apiRequest } from '../../config/api';

export async function register(data: { email: string; password: string; name?: string }) {
  const response = await apiRequest('/api/auth/register', {
    method: 'POST',
    body: JSON.stringify(data),
  });

  const result = await response.json();
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω
  if (result.token) {
    localStorage.setItem('auth_token', result.token);
  }

  return result;
}

export async function login(data: { email: string; password: string }) {
  const response = await apiRequest('/api/auth/login', {
    method: 'POST',
    body: JSON.stringify(data),
  });

  const result = await response.json();
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω
  if (result.token) {
    localStorage.setItem('auth_token', result.token);
  }

  return result;
}

export async function logout() {
  await apiRequest('/api/auth/logout', {
    method: 'POST',
  });

  localStorage.removeItem('auth_token');
}
```

---

## üìÅ –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**–§–∞–π–ª: `backend/src/services/storage.service.ts`**

```typescript
import fs from 'fs/promises';
import path from 'path';
import multer from 'multer';

const STORAGE_DIR = process.env.STORAGE_DIR || './storage/water-quality-analysis';

// –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
await fs.mkdir(STORAGE_DIR, { recursive: true });

const storage = multer.diskStorage({
  destination: async (req, file, cb) => {
    const analysisId = req.body.analysisId || req.params.id;
    const dir = path.join(STORAGE_DIR, analysisId);
    await fs.mkdir(dir, { recursive: true });
    cb(null, dir);
  },
  filename: (req, file, cb) => {
    const timestamp = Date.now();
    const sanitizedName = file.originalname.replace(/[^a-zA-Z0-9.-]/g, '_');
    cb(null, `${timestamp}_${sanitizedName}`);
  },
});

export const upload = multer({
  storage,
  limits: { fileSize: 10 * 1024 * 1024 }, // 10 –ú–ë
  fileFilter: (req, file, cb) => {
    if (file.mimetype === 'application/pdf') {
      cb(null, true);
    } else {
      cb(new Error('–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ PDF —Ñ–∞–π–ª—ã'));
    }
  },
});

export async function getFileUrl(analysisId: string, filename: string): Promise<string> {
  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º URL –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É —á–µ—Ä–µ–∑ API
  return `/api/storage/water-quality-analysis/${analysisId}/${filename}`;
}

export async function deleteFile(analysisId: string, filename: string): Promise<void> {
  const filePath = path.join(STORAGE_DIR, analysisId, filename);
  await fs.unlink(filePath);
}
```

**–§–∞–π–ª: `backend/src/routes/storage.ts`**

```typescript
import express from 'express';
import { upload, getFileUrl, deleteFile } from '../services/storage.service';
import { authenticateToken } from '../middleware/auth';
import path from 'path';
import fs from 'fs/promises';

const router = express.Router();

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
router.post(
  '/water-quality-analysis/:analysisId',
  authenticateToken,
  upload.single('file'),
  async (req, res) => {
    try {
      const { analysisId } = req.params;
      const file = req.file;

      if (!file) {
        return res.status(400).json({ error: '–§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω' });
      }

      const url = await getFileUrl(analysisId, file.filename);
      res.json({ url });
    } catch (error: any) {
      res.status(500).json({ error: error.message });
    }
  }
);

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
router.get(
  '/water-quality-analysis/:analysisId/:filename',
  authenticateToken,
  async (req, res) => {
    try {
      const { analysisId, filename } = req.params;
      const filePath = path.join(
        process.env.STORAGE_DIR || './storage/water-quality-analysis',
        analysisId,
        filename
      );

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
      await fs.access(filePath);

      res.sendFile(path.resolve(filePath));
    } catch (error: any) {
      res.status(404).json({ error: '–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω' });
    }
  }
);

// –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
router.delete(
  '/water-quality-analysis/:analysisId/:filename',
  authenticateToken,
  async (req, res) => {
    try {
      const { analysisId, filename } = req.params;
      await deleteFile(analysisId, filename);
      res.json({ success: true });
    } catch (error: any) {
      res.status(500).json({ error: error.message });
    }
  }
);

export default router;
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: MinIO (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
npm install minio
```

**–§–∞–π–ª: `backend/src/services/storage.service.ts` (MinIO)**

```typescript
import MinIO from 'minio';

const minioClient = new MinIO.Client({
  endPoint: process.env.MINIO_ENDPOINT || 'localhost',
  port: parseInt(process.env.MINIO_PORT || '9000'),
  useSSL: process.env.MINIO_USE_SSL === 'true',
  accessKey: process.env.MINIO_ACCESS_KEY!,
  secretKey: process.env.MINIO_SECRET_KEY!,
});

const BUCKET_NAME = 'water-quality-analysis';

// –°–æ–∑–¥–∞–µ–º bucket, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
async function ensureBucket() {
  const exists = await minioClient.bucketExists(BUCKET_NAME);
  if (!exists) {
    await minioClient.makeBucket(BUCKET_NAME, 'us-east-1');
  }
}

ensureBucket();

export async function uploadFile(
  analysisId: string,
  file: Buffer,
  filename: string
): Promise<string> {
  const objectName = `${analysisId}/${Date.now()}_${filename}`;
  
  await minioClient.putObject(BUCKET_NAME, objectName, file);
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º presigned URL (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 7 –¥–Ω–µ–π)
  const url = await minioClient.presignedGetObject(BUCKET_NAME, objectName, 7 * 24 * 60 * 60);
  
  return url;
}

export async function deleteFile(analysisId: string, filename: string): Promise<void> {
  const objectName = `${analysisId}/${filename}`;
  await minioClient.removeObject(BUCKET_NAME, objectName);
}
```

### –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑ Supabase Storage

**–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: `scripts/migrate-storage.ts`**

```typescript
import { createClient } from '@supabase/supabase-js';
import { MinIO } from 'minio';
import fs from 'fs/promises';

const supabaseUrl = process.env.SUPABASE_URL!;
const supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;
const supabase = createClient(supabaseUrl, supabaseKey);

const minioClient = new MinIO.Client({
  endPoint: process.env.MINIO_ENDPOINT || 'localhost',
  port: parseInt(process.env.MINIO_PORT || '9000'),
  useSSL: process.env.MINIO_USE_SSL === 'true',
  accessKey: process.env.MINIO_ACCESS_KEY!,
  secretKey: process.env.MINIO_SECRET_KEY!,
});

async function migrateFiles() {
  // 1. –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ Supabase Storage
  const { data: files, error } = await supabase.storage
    .from('water-quality-analysis')
    .list('', { limit: 1000, recursive: true });

  if (error) {
    console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤:', error);
    return;
  }

  // 2. –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª
  for (const file of files) {
    try {
      // –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª –∏–∑ Supabase
      const { data: fileData, error: downloadError } = await supabase.storage
        .from('water-quality-analysis')
        .download(file.name);

      if (downloadError) {
        console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ ${file.name}:`, downloadError);
        continue;
      }

      // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤ MinIO
      const buffer = Buffer.from(await fileData.arrayBuffer());
      await minioClient.putObject('water-quality-analysis', file.name, buffer);

      console.log(`‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω: ${file.name}`);
    } catch (error) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ ${file.name}:`, error);
    }
  }

  console.log('‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
}

migrateFiles();
```

---

## üîå –ú–∏–≥—Ä–∞—Ü–∏—è API –∫–ª–∏–µ–Ω—Ç–æ–≤

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ API –∫–ª–∏–µ–Ω—Ç–∞

**–§–∞–π–ª: `src/services/api/apiClient.ts`**

```typescript
import { apiRequest } from '../../config/api';

export class ApiClient {
  private baseUrl: string;

  constructor(baseUrl?: string) {
    this.baseUrl = baseUrl || '';
  }

  async get<T>(endpoint: string): Promise<T> {
    const response = await apiRequest(`${this.baseUrl}${endpoint}`, {
      method: 'GET',
    });
    return response.json();
  }

  async post<T>(endpoint: string, data?: any): Promise<T> {
    const response = await apiRequest(`${this.baseUrl}${endpoint}`, {
      method: 'POST',
      body: JSON.stringify(data),
    });
    return response.json();
  }

  async put<T>(endpoint: string, data?: any): Promise<T> {
    const response = await apiRequest(`${this.baseUrl}${endpoint}`, {
      method: 'PUT',
      body: JSON.stringify(data),
    });
    return response.json();
  }

  async delete<T>(endpoint: string): Promise<T> {
    const response = await apiRequest(`${this.baseUrl}${endpoint}`, {
      method: 'DELETE',
    });
    return response.json();
  }
}

export const apiClient = new ApiClient('/api');
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å API –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–¥—ã

**–§–∞–π–ª: `src/services/api/waterQuality/waterAnalysis.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)**

```typescript
import { apiClient } from '../apiClient';

export async function getWaterAnalyses(filters?: {
  samplingPointId?: string;
  startDate?: string;
  endDate?: string;
}) {
  const params = new URLSearchParams();
  if (filters?.samplingPointId) params.append('samplingPointId', filters.samplingPointId);
  if (filters?.startDate) params.append('startDate', filters.startDate);
  if (filters?.endDate) params.append('endDate', filters.endDate);

  return apiClient.get(`/water-quality/analysis?${params.toString()}`);
}

export async function getWaterAnalysis(id: string) {
  return apiClient.get(`/water-quality/analysis/${id}`);
}

export async function createWaterAnalysis(data: any) {
  return apiClient.post('/water-quality/analysis', data);
}

export async function updateWaterAnalysis(id: string, data: any) {
  return apiClient.put(`/water-quality/analysis/${id}`, data);
}

export async function deleteWaterAnalysis(id: string) {
  return apiClient.delete(`/water-quality/analysis/${id}`);
}
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ backend API

**–§–∞–π–ª: `backend/src/routes/water-quality.ts`**

```typescript
import express from 'express';
import { authenticateToken } from '../middleware/auth';
import { db } from '../config/database';

const router = express.Router();

// –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
router.use(authenticateToken);

// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–Ω–∞–ª–∏–∑–æ–≤
router.get('/analysis', async (req, res) => {
  try {
    const { samplingPointId, startDate, endDate } = req.query;

    let query = `
      SELECT wa.*, sp.name as sampling_point_name
      FROM water_analysis wa
      LEFT JOIN sampling_points sp ON sp.id = wa.sampling_point_id
      WHERE 1=1
    `;
    const params: any[] = [];
    let paramIndex = 1;

    if (samplingPointId) {
      query += ` AND wa.sampling_point_id = $${paramIndex++}`;
      params.push(samplingPointId);
    }

    if (startDate) {
      query += ` AND wa.sample_date >= $${paramIndex++}`;
      params.push(startDate);
    }

    if (endDate) {
      query += ` AND wa.sample_date <= $${paramIndex++}`;
      params.push(endDate);
    }

    query += ` ORDER BY wa.sample_date DESC`;

    const result = await db.query(query, params);
    res.json(result.rows);
  } catch (error: any) {
    res.status(500).json({ error: error.message });
  }
});

// –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ø–æ ID
router.get('/analysis/:id', async (req, res) => {
  try {
    const { id } = req.params;
    const result = await db.query(
      `SELECT wa.*, sp.name as sampling_point_name
       FROM water_analysis wa
       LEFT JOIN sampling_points sp ON sp.id = wa.sampling_point_id
       WHERE wa.id = $1`,
      [id]
    );

    if (result.rows.length === 0) {
      return res.status(404).json({ error: '–ê–Ω–∞–ª–∏–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω' });
    }

    res.json(result.rows[0]);
  } catch (error: any) {
    res.status(500).json({ error: error.message });
  }
});

// –°–æ–∑–¥–∞—Ç—å –∞–Ω–∞–ª–∏–∑
router.post('/analysis', async (req, res) => {
  try {
    const {
      samplingPointId,
      sampleDate,
      sampledBy,
      analyzedBy,
      notes,
    } = req.body;

    const result = await db.query(
      `INSERT INTO water_analysis (
        sampling_point_id,
        sample_date,
        sampled_by,
        analyzed_by,
        notes,
        status,
        created_by
      ) VALUES ($1, $2, $3, $4, $5, 'in_progress', $6)
      RETURNING *`,
      [samplingPointId, sampleDate, sampledBy, analyzedBy, notes, req.user!.id]
    );

    res.status(201).json(result.rows[0]);
  } catch (error: any) {
    res.status(500).json({ error: error.message });
  }
});

// –û–±–Ω–æ–≤–∏—Ç—å –∞–Ω–∞–ª–∏–∑
router.put('/analysis/:id', async (req, res) => {
  try {
    const { id } = req.params;
    const updates = req.body;

    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å—Ç—Ä–æ–∏–º –∑–∞–ø—Ä–æ—Å UPDATE
    const setClause: string[] = [];
    const params: any[] = [];
    let paramIndex = 1;

    Object.keys(updates).forEach((key) => {
      if (key !== 'id') {
        setClause.push(`${key} = $${paramIndex++}`);
        params.push(updates[key]);
      }
    });

    params.push(id);

    const result = await db.query(
      `UPDATE water_analysis
       SET ${setClause.join(', ')}, updated_at = NOW()
       WHERE id = $${paramIndex}
       RETURNING *`,
      params
    );

    if (result.rows.length === 0) {
      return res.status(404).json({ error: '–ê–Ω–∞–ª–∏–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω' });
    }

    res.json(result.rows[0]);
  } catch (error: any) {
    res.status(500).json({ error: error.message });
  }
});

// –£–¥–∞–ª–∏—Ç—å –∞–Ω–∞–ª–∏–∑
router.delete('/analysis/:id', async (req, res) => {
  try {
    const { id } = req.params;
    await db.query('DELETE FROM water_analysis WHERE id = $1', [id]);
    res.json({ success: true });
  } catch (error: any) {
    res.status(500).json({ error: error.message });
  }
});

export default router;
```

---

## ‚è∞ –ú–∏–≥—Ä–∞—Ü–∏—è cron jobs

### –®–∞–≥ 1: –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª: `backend/src/cron/collect-beliot-readings.ts`**

```typescript
import { db } from '../config/database';
// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∏–∑ scripts/collect-beliot-readings.ts
// –ó–∞–º–µ–Ω–∏—Ç—å supabase.rpc() –Ω–∞ –ø—Ä—è–º–æ–π SQL –∑–∞–ø—Ä–æ—Å

// –ë–´–õ–û:
// await supabase.rpc('insert_beliot_reading', {...})

// –°–¢–ê–ù–ï–¢:
await db.query(
  `SELECT insert_beliot_reading($1, $2, $3, $4, $5, $6, $7)`,
  [deviceId, readingDate, readingValue, unit, readingType, source, period]
);
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ node-cron

**–§–∞–π–ª: `backend/src/server.ts`**

```typescript
import cron from 'node-cron';
import { collectReadings } from './cron/collect-beliot-readings';

// –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–π —á–∞—Å –≤ 0 –º–∏–Ω—É—Ç
cron.schedule('0 * * * *', async () => {
  console.log('üîÑ –ó–∞–ø—É—Å–∫ —Å–±–æ—Ä–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π Beliot...');
  try {
    await collectReadings();
    console.log('‚úÖ –°–±–æ—Ä –ø–æ–∫–∞–∑–∞–Ω–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω');
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π:', error);
  }
});

console.log('‚úÖ Cron jobs –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
```

---

## üöÄ –ü–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL:**
   ```bash
   # Ubuntu/Debian
   sudo apt-get update
   sudo apt-get install postgresql postgresql-contrib
   
   # –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   sudo -u postgres createdb equipment_management
   sudo -u postgres createuser equipment_user
   sudo -u postgres psql -c "ALTER USER equipment_user WITH PASSWORD 'secure_password';"
   sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE equipment_management TO equipment_user;"
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js:**
   ```bash
   curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
   sudo apt-get install -y nodejs
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx:**
   ```bash
   sudo apt-get install nginx
   ```

4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ MinIO (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   ```bash
   wget https://dl.min.io/server/minio/release/linux-amd64/minio
   chmod +x minio
   sudo mv minio /usr/local/bin/
   
   # –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
   sudo mkdir -p /data/minio
   sudo chown $USER:$USER /data/minio
   
   # –ó–∞–ø—É—Å–∫ MinIO
   minio server /data/minio
   ```

### –≠—Ç–∞–ø 2: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ backend

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
   ```bash
   git clone <repository-url>
   cd backend
   npm install
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   cp .env.example .env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env
   ```

3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î:**
   ```bash
   psql -U equipment_user -d equipment_management -f ../docs/supabase-schema-adapted.sql
   ```

4. **–ó–∞–ø—É—Å–∫ backend:**
   ```bash
   npm run build
   npm start
   ```

### –≠—Ç–∞–ø 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

**–§–∞–π–ª: `/etc/nginx/sites-available/equipment-management`**

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # Frontend (React)
    location / {
        root /var/www/equipment-management/dist;
        try_files $uri $uri/ /index.html;
    }

    # Backend API
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # Storage (—Ñ–∞–π–ª—ã)
    location /storage {
        alias /var/www/equipment-management/storage;
        add_header Content-Disposition "attachment";
    }
}
```

**–ê–∫—Ç–∏–≤–∞—Ü–∏—è:**
```bash
sudo ln -s /etc/nginx/sites-available/equipment-management /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### –≠—Ç–∞–ø 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PM2 (–ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä)

```bash
npm install -g pm2

# –ó–∞–ø—É—Å–∫ backend
pm2 start dist/server.js --name equipment-backend

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
pm2 startup
pm2 save
```

### –≠—Ç–∞–ø 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (Let's Encrypt)

```bash
sudo apt-get install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- [ ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Supabase
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å—Ö–µ–º—ã –ë–î
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –ë–î
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤ –∏–∑ Supabase Storage
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ö–µ–º—ã (—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç auth.users)
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- [ ] –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

### Backend

- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è API endpoints
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron jobs
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### Frontend

- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª–µ–π)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

- [ ] –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ backend
- [ ] –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ frontend
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PM2
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ü–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** –ù–µ –º–æ–≥—É—Ç –±—ã—Ç—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞–ø—Ä—è–º—É—é. –ù—É–∂–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª–∏.

2. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏:** –ù—É–∂–Ω–æ —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤ middleware –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

3. **–§—É–Ω–∫—Ü–∏–∏ –ë–î:** –ù—É–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `auth.uid()`, –ø–µ—Ä–µ–¥–∞–≤–∞—è `user_id` –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä.

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω—ã–º –ø–µ—Ä–µ—Ö–æ–¥–æ–º.

5. **–û—Ç–∫–∞—Ç:** –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –Ω–∞ Supabase, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫.

### –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:** 1-2 –¥–Ω—è
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ backend:** 1-2 –Ω–µ–¥–µ–ª–∏
- **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** 1-2 –¥–Ω—è
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 3-5 –¥–Ω–µ–π
- **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** 1-2 –¥–Ω—è

**–ò—Ç–æ–≥–æ:** 3-4 –Ω–µ–¥–µ–ª–∏

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024
