# План разработки PWA приложения

## Обзор

Разработка Progressive Web App (PWA) с упрощенным интерфейсом для обычных пользователей и полным функционалом для администраторов.

---

## Целевая функциональность

### Для обычных пользователей:
- **Главное меню** с одной кнопкой "Оборудование"
- **Сканер QR-кода** при нажатии на "Оборудование"
- **Журнал обслуживания** оборудования после сканирования
- **Документация** оборудования (просмотр файлов из Google Drive)

### Для администраторов:
- **Полный функционал** веб-приложения
- Список всего оборудования
- Редактирование и удаление оборудования
- Все функции управления

---

## Этап 1: Настройка PWA инфраструктуры

### 1.1. Создание манифеста приложения

**Файл:** `public/manifest.json`

### 1.2. Обновление index.html

Добавить ссылки на манифест и мета-теги для PWA

### 1.3. Service Worker

**Файл:** `public/sw.js` или `src/sw.ts`

**Функциональность:**
- Кэширование статических ресурсов
- Кэширование API запросов (опционально)
- Офлайн-страница
- Обновление кэша при новой версии

### 1.4. Регистрация Service Worker

**Файл:** `src/utils/registerServiceWorker.ts`

---

## Этап 2: Определение типа пользователя и устройства

### 2.1. Утилиты определения устройства

**Файл:** `src/utils/deviceDetection.ts`

### 2.2. Хук для определения устройства

**Файл:** `src/hooks/useDeviceDetection.ts`

---

## Этап 3: Главное меню для обычных пользователей

### 3.1. Компонент главного меню

**Файл:** `src/components/PWAMenu/PWAMenu.tsx`

**Структура:**
- Заголовок с приветствием и email пользователя
- Большая кнопка "Оборудование" (иконка + текст)
- Кнопка "Выйти" внизу

### 3.2. Стили главного меню

**Файл:** `src/components/PWAMenu/PWAMenu.css`

### 3.3. Обновление HomePage

**Файл:** `src/pages/HomePage.tsx`

---

## Этап 4: Интеграция сканера QR-кодов

### 4.1. Установка библиотеки

```bash
npm install html5-qrcode
```

### 4.2. Компонент сканера QR-кодов

**Файл:** `src/components/QRScanner/QRScanner.tsx`

### 4.3. Парсер QR-кодов

**Файл:** `src/utils/qrCodeParser.ts`

### 4.4. Обработка разрешений камеры

**Файл:** `src/utils/cameraPermissions.ts`

---

## Этап 5: Страница оборудования для PWA

### 5.1. Компонент страницы оборудования для PWA

**Файл:** `src/pages/PWAEquipmentPage.tsx`

### 5.2. Компонент вкладок

**Файл:** `src/components/PWATabs/PWATabs.tsx`

### 5.3. Навигация

---

## Этап 6: Обновление маршрутизации

### 6.1. Новые маршруты

**Файл:** `src/utils/routes.ts`

### 6.2. Обновление App.tsx

---

## Этап 7: Обработка ошибок и альтернативы

### 7.1. Обработка ошибок сканирования

### 7.2. Компонент ввода ID вручную

**Файл:** `src/components/ManualEquipmentInput.tsx`

---

## Этап 8: Оптимизация для PWA

### 8.1. Производительность

### 8.2. Офлайн-режим

### 8.3. Установка PWA

**Файл:** `src/components/InstallPrompt.tsx`

---

## Этап 9: Тестирование

### 9.1. Тестирование на устройствах

### 9.2. Тестовые сценарии

### 9.3. Тестирование PWA функций

---

## Этап 10: Документация

### 10.1. Инструкции для пользователей

**Файл:** `docs/PWA_USER_GUIDE.md`

### 10.2. Инструкции для разработчиков

---

## Порядок реализации

### Фаза 1: Базовая функциональность (Этапы 1-5)
1. Настройка PWA инфраструктуры
2. Определение типа пользователя и устройства
3. Главное меню для обычных пользователей
4. Интеграция сканера QR-кодов
5. Страница оборудования для PWA

### Фаза 2: Оптимизация (Этапы 6-8)
6. Обновление маршрутизации
7. Обработка ошибок и альтернативы
8. Оптимизация для PWA

### Фаза 3: Тестирование и документация (Этапы 9-10)
9. Тестирование
10. Документация

