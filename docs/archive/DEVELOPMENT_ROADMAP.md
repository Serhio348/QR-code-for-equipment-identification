# План развития приложения

## Текущее состояние приложения

### Функциональность:
- ✅ Создание табличек с характеристиками оборудования
- ✅ Генерация QR-кода (один для всех)
- ✅ Экспорт в PDF
- ✅ Хранение дат в localStorage
- ✅ Поддержка 2 фильтров (жестко закодировано)

### Ограничения:
- ❌ Один QR-код для всех единиц оборудования
- ❌ Одна папка Google Drive для всех
- ❌ Нет управления множеством единиц оборудования
- ❌ Данные хранятся только в localStorage (локально)
- ❌ Нет административной панели
- ❌ Жестко закодированные характеристики

---

## Предлагаемая архитектура развития

### Этап 1: База данных и управление оборудованием

#### Вариант А: Google Sheets как база данных (Рекомендуется для начала) ⭐

**Преимущества:**
- ✅ Бесплатно
- ✅ Уже используется в проекте
- ✅ Простая интеграция
- ✅ Не требует отдельного сервера
- ✅ Легко редактировать вручную

**Структура таблицы "Оборудование":**
| ID | Название | Тип | Характеристики (JSON) | Google Drive URL | QR Code URL | Дата создания | Статус |
|----|----------|-----|----------------------|------------------|-------------|---------------|--------|
| 1 | Фильтр ФО-0,8-1,5 №1 | Фильтр | {...} | https://... | https://... | 2024-01-15 | Активен |

**Реализация:**
- Google Apps Script API для чтения/записи
- React приложение подключается через REST API

#### Вариант Б: Firebase (Для масштабирования) ⭐⭐

**Преимущества:**
- ✅ Реальное время синхронизации
- ✅ Аутентификация пользователей
- ✅ Хранение файлов (Cloud Storage)
- ✅ Бесплатный тарифный план
- ✅ Отличная интеграция с React

**Структура:**
```javascript
equipment: {
  id: string,
  name: string,
  type: string,
  specs: object,
  googleDriveUrl: string,
  qrCodeUrl: string,
  createdAt: timestamp,
  status: 'active' | 'inactive'
}
```

#### Вариант В: Supabase (Альтернатива Firebase) ⭐⭐

**Преимущества:**
- ✅ PostgreSQL база данных
- ✅ REST API из коробки
- ✅ Бесплатный тариф
- ✅ Open Source
- ✅ Хорошая документация

---

### Этап 2: Административная панель

**Функциональность:**
1. **Список оборудования**
   - Просмотр всех единиц оборудования
   - Фильтрация по типу, статусу
   - Поиск по названию

2. **Добавление нового оборудования**
   - Форма с полями характеристик
   - Автоматическая генерация ID
   - Создание папки в Google Drive (через API)
   - Генерация QR-кода
   - Сохранение в базу данных

3. **Редактирование оборудования**
   - Изменение характеристик
   - Обновление QR-кода при изменении URL
   - Обновление дат обслуживания

4. **Удаление/Архивирование**
   - Мягкое удаление (статус = "Архив")
   - Сохранение истории

---

### Этап 3: Генерация QR-кодов и Google Drive

#### Автоматическое создание папок Google Drive

**Через Google Drive API:**
```javascript
// Создание папки для нового оборудования
async function createEquipmentFolder(equipmentName: string) {
  const folder = await drive.files.create({
    requestBody: {
      name: equipmentName,
      mimeType: 'application/vnd.google-apps.folder',
      parents: ['ROOT_FOLDER_ID']
    }
  });
  return folder.data.id;
}
```

#### Генерация уникальных QR-кодов

**Подход:**
- Каждое оборудование получает уникальный URL
- URL ведет на страницу с информацией об оборудовании
- Или напрямую на папку Google Drive этого оборудования

**Варианты URL:**
1. Прямая ссылка на Google Drive папку
2. Ссылка на веб-приложение с параметром ID оборудования
3. Ссылка на отдельную страницу для каждого оборудования

---

### Этап 4: Улучшенный интерфейс

#### Главная страница
- Список всего оборудования
- Поиск и фильтрация
- Быстрый доступ к табличкам

#### Страница оборудования
- Просмотр характеристик
- Генерация таблички
- Экспорт в PDF
- История обслуживания (из Google Sheets)

#### Административная панель
- Управление оборудованием
- Статистика
- Экспорт данных

---

## Предлагаемая структура проекта

```
src/
├── components/
│   ├── EquipmentPlate/        # Табличка оборудования
│   ├── EquipmentList/         # Список оборудования
│   ├── EquipmentForm/         # Форма добавления/редактирования
│   ├── QRCodeGenerator/       # Генератор QR-кодов
│   └── AdminPanel/            # Административная панель
├── pages/
│   ├── Home/                  # Главная страница
│   ├── Equipment/             # Страница оборудования
│   └── Admin/                 # Административная панель
├── services/
│   ├── database.ts            # Работа с базой данных
│   ├── googleDrive.ts        # Google Drive API
│   └── qrCode.ts             # Генерация QR-кодов
├── types/
│   └── equipment.ts          # Типы данных
└── utils/
    └── pdfExport.ts           # Экспорт в PDF
```

---

## Поэтапный план реализации

### Фаза 1: База данных (1-2 недели)
- [ ] Выбрать решение для БД (Google Sheets / Firebase / Supabase)
- [ ] Создать структуру базы данных
- [ ] Реализовать API для работы с БД
- [ ] Мигрировать существующие данные

### Фаза 2: Управление оборудованием (2-3 недели)
- [ ] Создать форму добавления оборудования
- [ ] Реализовать список оборудования
- [ ] Добавить редактирование
- [ ] Реализовать удаление/архивирование

### Фаза 3: Google Drive интеграция (1-2 недели)
- [ ] Настроить Google Drive API
- [ ] Реализовать создание папок
- [ ] Автоматическая настройка доступа
- [ ] Связывание оборудования с папками

### Фаза 4: QR-коды (1 неделя)
- [ ] Генерация уникальных QR-кодов
- [ ] Связывание с папками Google Drive
- [ ] Обновление QR-кодов при изменении

### Фаза 5: Улучшение UI/UX (1-2 недели)
- [ ] Редизайн интерфейса
- [ ] Добавление поиска и фильтров
- [ ] Улучшение мобильной версии
- [ ] Добавление статистики

---

## Рекомендуемый стек технологий

### Frontend (уже используется):
- React 18
- TypeScript
- Vite

### База данных (выбрать один):
1. **Google Sheets** (просто, бесплатно) - для начала
2. **Firebase** (масштабируемо) - для роста
3. **Supabase** (альтернатива Firebase) - для гибкости

### Дополнительные библиотеки:
- React Router (навигация)
- React Query / SWR (управление состоянием API)
- Formik / React Hook Form (формы)
- Material-UI / Ant Design (UI компоненты)

---

## Пример структуры данных

### Оборудование (Equipment)
```typescript
interface Equipment {
  id: string;                    // Уникальный ID
  name: string;                  // Название
  type: string;                  // Тип оборудования
  serialNumber?: string;         // Серийный номер
  specs: EquipmentSpecs;         // Характеристики
  googleDriveFolderId: string;   // ID папки в Google Drive
  googleDriveUrl: string;        // URL папки
  qrCodeUrl: string;             // URL для QR-кода
  qrCodeImage?: string;          // Изображение QR-кода (base64)
  commissioningDate?: string;    // Дата ввода в эксплуатацию
  lastMaintenanceDate?: string;  // Дата последнего обслуживания
  status: 'active' | 'inactive' | 'archived';
  createdAt: string;
  updatedAt: string;
}

interface EquipmentSpecs {
  height?: string;
  diameter?: string;
  capacity?: string;
  // ... другие характеристики в зависимости от типа
}
```

---

## Преимущества предлагаемого решения

1. **Масштабируемость**
   - Легко добавлять новое оборудование
   - Неограниченное количество единиц

2. **Гибкость**
   - Разные типы оборудования
   - Настраиваемые характеристики

3. **Централизованное управление**
   - Вся информация в одном месте
   - Легко обновлять и синхронизировать

4. **Уникальность**
   - Каждое оборудование имеет свой QR-код
   - Своя папка в Google Drive
   - Своя история обслуживания

5. **Расширяемость**
   - Легко добавлять новые функции
   - Интеграция с другими системами

---

## Следующие шаги

1. **Выбрать решение для БД** (рекомендую начать с Google Sheets)
2. **Создать прототип** административной панели
3. **Реализовать CRUD** операции для оборудования
4. **Интегрировать Google Drive API**
5. **Добавить генерацию QR-кодов**

---

## Вопросы для обсуждения

1. Какое количество оборудования планируется?
2. Нужна ли аутентификация пользователей?
3. Кто будет иметь доступ к административной панели?
4. Нужна ли синхронизация между устройствами?
5. Требуется ли офлайн-режим?

